<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Task 2 — Compare Trajectories</title>
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
      .wrap { max-width: 820px; margin: 24px auto; padding: 0 12px; }
      .flex { display: flex; gap: 24px; flex-wrap: wrap; align-items: flex-start; }
      .trajbox { border: 1px solid #e5e5e5; padding: 12px; border-radius: 10px; width: 240px; background: #fbfbfb; }
      .trajbox h3 { margin: 0 0 8px; }
      .meta { color: #555; font-size: 14px; }
      .bar { height: 6px; background: #eee; border-radius: 4px; margin: 6px 0 10px; }
      .controls { margin-top: 12px; display: flex; gap: 12px; align-items: center; }
      .btn { padding: 8px 12px; border: 1px solid #ddd; border-radius: 8px; background: #fafafa; text-decoration: none; cursor: pointer; }
      .muted { color: #777; font-size: 13px; }
    </style>
  </head>
  <body>
    <div class="wrap">
      <h2>Task 2 — Choose the better trajectory</h2>

      {% if message %}
        <p>{{ message }}</p>
        <p class="controls">
          <a class="btn" href="{% url 'project5:sample' %}">Sample trajectories</a>
          <a class="btn" href="{% url 'project5:index' %}">Back to page</a>
        </p>
      {% else %}
        <form method="post">
          {% csrf_token %}
          <input type="hidden" name="idx_a" value="{{ idx_a }}">
          <input type="hidden" name="idx_b" value="{{ idx_b }}">

          <div class="flex">
            <div class="trajbox">
              <h3>A</h3>
              <div class="meta">Length: {{ A.length }}</div>
              <div class="meta">Return: {{ A.return|floatformat:2 }}</div>
              <div class="meta">Cheese steps: {{ A.cheese }}</div>
              <div class="meta">Trap hits: {{ A.traps }}</div>
              <div class="bar"></div>
              <label><input type="radio" name="preference" value="A" checked> Prefer A</label>
            </div>

            <div class="trajbox">
              <h3>B</h3>
              <div class="meta">Length: {{ B.length }}</div>
              <div class="meta">Return: {{ B.return|floatformat:2 }}</div>
              <div class="meta">Cheese steps: {{ B.cheese }}</div>
              <div class="meta">Trap hits: {{ B.traps }}</div>
              <div class="bar"></div>
              <label><input type="radio" name="preference" value="B"> Prefer B</label>
            </div>
          </div>

          <div class="controls">
            <button class="btn" type="submit">Submit preference</button>
            <a class="btn" href="{% url 'project5:compare' %}">Show another pair</a>
            <span class="muted">Collected so far: {{ num_prefs }}</span>
          </div>
        </form>

        <p class="controls" style="margin-top: 6px;">
          <a class="btn" href="{% url 'project5:index' %}">Back to page</a>
        </p>
      {% endif %}
    </div>
  </body>
</html>
