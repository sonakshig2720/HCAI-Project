{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'project4.css' %}?v=10">
{% endblock %}

{% block content %}
<div class="project4 details page-with-topbar">

  <!-- Top navigation bar -->
  <div class="top-bar">
    <div class="home-left">
      <a href="{% url 'home:index' %}" class="home-button">Home</a>
    </div>
    <div class="right-actions">
      <a href="{% url 'project4:restart' %}" class="proj4-button">New Study</a>
      <a href="{% url 'project4:debrief' %}" class="proj4-button">End Survey</a>
      <a href="{% url 'project4:index' %}" class="proj4-button">Project 4</a>
    </div>
  </div>

  <!-- Title -->
  <h1>Recommendation Details</h1>

  <!-- Confidence -->
  <section class="card detail-card">
    <h2>Confidence</h2>
    <p class="metric"><strong>{{ confidence }}%</strong></p>
    <p>This is how far the predicted rating is from neutral (3.0) for <em>{{ next_movie_title }}</em>.</p>
  </section>

  <!-- Genre Hint -->
  <section class="card detail-card">
    <h2>Genre Hint</h2>
    <p class="metric"><strong>{{ key_genre }}</strong></p>
    <p>Dominant genre for the current query; a quick cue to the taste dimension.</p>
  </section>

  <!-- Impact Preview -->
  <section class="card detail-card">
    <h2>Impact Preview</h2>
    {% if guidance_pairs %}
      <ul class="impact-list">
        {% for pair in guidance_pairs %}
          <li>
            <span class="label">Before:</span> {{ pair.before }}<br>
            <span class="label">After:</span> {{ pair.after }}
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No preview yet.</p>
    {% endif %}
    <p class="note">“After” assumes you love the movie and rate it 5.0.</p>
  </section>

  <!-- Information Gain -->
  <section class="card detail-card">
    <h2>Information Gain</h2>
    <p class="metric"><strong>{{ info_gain }}</strong></p>
    <p>Magnitude of change in your latent profile if you love the current movie.</p>
  </section>

</div>
{% endblock %}
