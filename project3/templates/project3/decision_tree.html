{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'project2.css' %}">
{% endblock %}

{% block content %}
<div class="project2">


  <section>
    <h1>Decision Tree Classifier</h1>

    <form method="post" class="form-block">
      {% csrf_token %}
      <label for="depth"><strong>Max Depth:</strong></label>
      <input
        type="number"
        name="depth"
        id="depth"
        min="1"
        max="20"
        required
        value="{{ depth|default:3 }}"
      />
      <button type="submit">Show</button>
    </form>

    {% if error %}
      <div style="padding:10px;border:1px solid #d33;background:#fee;color:#900;margin-bottom:1rem;">
        {{ error }}
      </div>
    {% endif %}

    {% if accuracy %}
      <div class="metrics">
        <div><strong>Accuracy:</strong> {{ accuracy }}%</div>
        <div><strong>Number of Leaves:</strong> {{ leaves }}</div>
        <div><strong>Maximum Depth (given):</strong> {{ depth }}</div>
      </div>

      <div class="learning-curve-container" style="margin-top:1rem;">
        <img src="data:image/png;base64,{{ tree_image }}" alt="Decision Tree">
      </div>
    {% endif %}

    <div style="margin-top:1.25rem;">
      <a href="{% url 'project3:index' %}" class="home-button">Project 3</a>
    </div>
  </section>

</div>
{% endblock %}
